<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç‡Ÿé¤Šå¸«ç›£ç£æ—¥è¨˜ | Diet Partner</title>
    <style>
        :root {
            --primary-color: #4CAF50;
            --secondary-color: #8BC34A;
            --bg-color: #f4f7f6;
            --user-msg: #DCF8C6;
            --ai-msg: #ffffff;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg-color); margin: 0; display: flex; justify-content: center; height: 100vh; }
        .app-container { width: 100%; max-width: 1000px; display: flex; flex-direction: row; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin: 20px; border-radius: 12px; overflow: hidden; background: white; }
        
        /* èŠå¤©å€ */
        .chat-section { flex: 2; display: flex; flex-direction: column; border-right: 1px solid #ddd; }
        .chat-header { background: var(--primary-color); color: white; padding: 20px; font-size: 1.2rem; font-weight: bold; }
        .chat-window { flex: 1; padding: 20px; overflow-y: auto; background: #e5ddd5; display: flex; flex-direction: column; gap: 10px; }
        .msg { max-width: 80%; padding: 10px 15px; border-radius: 8px; line-height: 1.4; position: relative; }
        .user-msg { align-self: flex-end; background: var(--user-msg); box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .ai-msg { align-self: flex-start; background: var(--ai-msg); box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .input-area { padding: 20px; display: flex; gap: 10px; background: #f0f0f0; }
        input { flex: 1; border: none; padding: 12px; border-radius: 25px; outline: none; font-size: 1rem; }
        button { background: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; transition: 0.3s; }
        button:hover { background: #45a049; }

        /* å„€è¡¨æ¿å€ */
        .dashboard { flex: 1; padding: 25px; display: flex; flex-direction: column; gap: 20px; background: #fff; overflow-y: auto; }
        .card { background: #f9f9f9; padding: 15px; border-radius: 10px; border-left: 5px solid var(--primary-color); }
        .card h3 { margin-top: 0; font-size: 1rem; color: #333; }
        .status-good { color: #2e7d32; font-weight: bold; }
        .status-warn { color: #d32f2f; font-weight: bold; }
        .plate-img { width: 100%; border-radius: 8px; margin-top: 10px; }

        @media (max-width: 768px) {
            .app-container { flex-direction: column; }
            .dashboard { height: 300px; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="chat-section">
        <div class="chat-header">ğŸ æˆ‘çš„ AI ç‡Ÿé¤Šå¸«</div>
        <div class="chat-window" id="chatWindow">
            <div class="msg ai-msg">ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„è™›æ“¬ç‡Ÿé¤Šå¸«ã€‚ä»Šå¤©æ‰“ç®—æ€éº¼åƒï¼Ÿè«‹å‘Šè¨´æˆ‘ä½ çš„é¤é»å…§å®¹ï¼ˆä¾‹å¦‚ï¼šåˆé¤åƒäº†æ’éª¨ä¾¿ç•¶ï¼Œæ²’å–é£²æ–™ï¼‰ã€‚</div>
        </div>
        <div class="input-area">
            <input type="text" id="userInput" placeholder="è¼¸å…¥é£²é£Ÿå…§å®¹..." onkeypress="if(event.keyCode==13) sendMessage()">
            <button onclick="sendMessage()">ç™¼é€</button>
        </div>
    </div>

    <div class="dashboard">
        <div class="card">
            <h3>ğŸ“Š ç•¶å‰ç‹€æ…‹è©•ä¼°</h3>
            <p id="analysisText">ç­‰å¾…è¼¸å…¥è³‡æ–™...</p>
        </div>
        <div class="card">
            <h3>ğŸ¥— å¥åº·é¤ç›¤å»ºè­°</h3>
            <p style="font-size: 0.85rem; color: #666;">æ¯é¤ç†æƒ³æ¯”ä¾‹ï¼š2ä»½è”¬èœã€1ä»½å„ªè³ªè›‹ç™½ã€1ä»½å…¨ç©€é¡ã€‚</p>
            
        </div>
        <div class="card">
            <h3>ğŸ’§ é£²æ°´è¿½è¹¤</h3>
            <p>ç›®æ¨™ï¼š2500cc / ç›®å‰ï¼š<span id="waterCount">0</span>cc</p>
            <button onclick="addWater()" style="background: #2196F3; font-size: 0.8rem; padding: 5px 15px;">å–æ¯æ°´ +250cc</button>
        </div>
    </div>
</div>

<script>
    let water = 0;

    function sendMessage() {
        const input = document.getElementById('userInput');
        const window = document.getElementById('chatWindow');
        const analysis = document.getElementById('analysisText');
        
        if (!input.value.trim()) return;

        // æ·»åŠ ä½¿ç”¨è€…è¨Šæ¯
        addMessage(input.value, 'user-msg');

        // æ¨¡æ“¬åˆ†æé‚è¼¯
        let reply = "";
        let advice = "";

        const text = input.value;
        if (text.includes("é›èƒ¸è‚‰") || text.includes("è›‹ç™½")) {
            reply = "é€™é¤è›‹ç™½è³ªå¾ˆé«˜å–”ï¼è¨˜å¾—è¦æ”å–è¶³å¤ çš„è†³é£Ÿçº–ç¶­ä¾†å¹«åŠ©è…¸é“é‹ä½œï¼Œå¦å‰‡å®¹æ˜“ä¾¿ç§˜ã€‚";
            advice = "<span class='status-good'>è›‹ç™½è³ªå……è¶³</span>ï¼Œä½†éœ€è£œå……ç¶ è‰²è”¬èœã€‚";
        } else if (text.includes("ç‚¸") || text.includes("çå¥¶") || text.includes("ç”œé»")) {
            reply = "åµæ¸¬åˆ°é«˜ç†±é‡/åŠ å·¥é£Ÿå“ã€‚ä¸‹ä¸€é¤è«‹å‹™å¿…æ¸…æ·¡ï¼Œä¸¦å¢åŠ æ´»å‹•é‡æŠµéŠ·ç†±é‡ã€‚";
            advice = "<span class='status-warn'>æ²¹è„‚/ç³–åˆ†è¶…æ¨™é è­¦</span>ï¼Œå»ºè­°å¢åŠ ä¸€é¤ç´”è”¬èœè£œå……ã€‚";
        } else if (text.includes("èœ") || text.includes("æ²™æ‹‰")) {
            reply = "å¤ªæ£’äº†ï¼æœ‰æ„è­˜åœ°è£œå……çº–ç¶­æ˜¯æ¸›é‡æˆåŠŸçš„åŸºçŸ³ã€‚";
            advice = "<span class='status-good'>çº–ç¶­è³ªé”æ¨™</span>ï¼Œç¶­æŒè‰¯å¥½ä»£è¬ä¸­ã€‚";
        } else {
            reply = "æ”¶åˆ°è¨˜éŒ„ï¼å»ºè­°æ­é…è¶³å¤ çš„æ°´åˆ†ï¼Œèƒ½è®“æ¸›é‡æ•ˆç‡æ›´é«˜ã€‚";
            advice = "æŒçºŒè¨˜éŒ„æ˜¯æˆåŠŸçš„é–‹å§‹ï¼ŒåŠ æ²¹ï¼";
        }

        setTimeout(() => {
            addMessage(reply, 'ai-msg');
            analysis.innerHTML = advice;
        }, 500);

        input.value = "";
    }

    function addMessage(text, className) {
        const window = document.getElementById('chatWindow');
        const div = document.createElement('div');
        div.className = 'msg ' + className;
        div.innerText = text;
        window.appendChild(div);
        window.scrollTop = window.scrollHeight;
    }

    function addWater() {
        water += 250;
        document.getElementById('waterCount').innerText = water;
        if (water >= 2500) {
            addMessage("é£²æ°´é‡é”æˆç›®æ¨™ï¼å¤ªå„ªç§€äº†ï¼", 'ai-msg');
        }
    }
</script>

</body>
</html>
